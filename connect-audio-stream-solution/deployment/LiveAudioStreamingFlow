{"modules":[{"id":"856dd865-e5a0-49c6-aacc-55fe53c38a22","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"07273109-a75a-4742-aaae-ce35603c31fc"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":186,"y":16}}},{"id":"07273109-a75a-4742-aaae-ce35603c31fc","type":"PlayPrompt","branches":[{"condition":"Success","transition":"53e6aa2b-e374-4ae6-bfc9-1285d2ac202f"}],"parameters":[{"name":"Text","value":"This is the sample flow to demonstrate customer audio streaming.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":405,"y":17},"useDynamic":false}},{"id":"53e6aa2b-e374-4ae6-bfc9-1285d2ac202f","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"6728609a-9707-41f7-a87c-30ac1fde4f4c"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":645,"y":10}}},{"id":"410057d0-9390-486b-bbb4-c4def2a7367c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"99458f47-6941-48ce-9b90-fdf184759b22"}],"parameters":[{"name":"Text","value":"An error occurred when we tried to start streaming.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":337,"y":726},"useDynamic":false}},{"id":"99458f47-6941-48ce-9b90-fdf184759b22","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1375,"y":476}}},{"id":"7d725cde-60d9-4265-9a71-04ff7fad2f43","type":"PlayPrompt","branches":[{"condition":"Success","transition":"99458f47-6941-48ce-9b90-fdf184759b22"}],"parameters":[{"name":"Text","value":"Thank you for your input. Bye Bye","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1359,"y":175},"useDynamic":false}},{"id":"542e7837-35a0-4bdd-9312-517add34403d","type":"StopMediaStreaming","branches":[{"condition":"Success","transition":"7d725cde-60d9-4265-9a71-04ff7fad2f43"},{"condition":"Error","transition":"7d725cde-60d9-4265-9a71-04ff7fad2f43"}],"parameters":[{"name":"Track","value":"FromCustomer"},{"name":"Track","value":"ToCustomer"},{"name":"MediaStreamTypes","value":"Audio"}],"metadata":{"position":{"x":1100,"y":246}}},{"id":"e8175392-eec1-40e0-8c76-1bab69030857","type":"GetUserInput","branches":[{"condition":"Timeout","transition":"542e7837-35a0-4bdd-9312-517add34403d"},{"condition":"NoMatch","transition":"542e7837-35a0-4bdd-9312-517add34403d"},{"condition":"Error","transition":"542e7837-35a0-4bdd-9312-517add34403d"}],"parameters":[{"name":"Text","value":"Please deep breath then cough. Press # to finish.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"120"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":851,"y":225},"conditionMetadata":[],"useDynamic":false},"target":"Digits"},{"id":"aa21389d-0252-465c-80ec-2c9ea9a83b19","type":"PlayPrompt","branches":[{"condition":"Success","transition":"99458f47-6941-48ce-9b90-fdf184759b22"}],"parameters":[{"name":"Text","value":"An error occurred with the KVS trigger lambda function.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":864,"y":572},"useDynamic":false}},{"id":"97a964a7-5dd2-4c82-b21f-173b209be8a7","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"e8175392-eec1-40e0-8c76-1bab69030857"},{"condition":"Error","transition":"aa21389d-0252-465c-80ec-2c9ea9a83b19"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:948279062543:function:liveaudiostreamingstack-kvsConsumerTrigger-9FCT9H4QI6GD","namespace":null},{"name":"TimeLimit","value":"8"}],"metadata":{"position":{"x":619,"y":331},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"e7825b58-a9db-4935-9f83-e67a564176e8","type":"SetAttributes","branches":[{"condition":"Success","transition":"97a964a7-5dd2-4c82-b21f-173b209be8a7"},{"condition":"Error","transition":"97a964a7-5dd2-4c82-b21f-173b209be8a7"}],"parameters":[{"name":"Attribute","value":"true","key":"transcribeCall","namespace":null},{"name":"Attribute","value":"true","key":"saveCallRecording","namespace":null},{"name":"Attribute","value":"aid","key":"aid","namespace":"External"},{"name":"Attribute","value":"sak","key":"sak","namespace":"External"},{"name":"Attribute","value":"sst","key":"sst","namespace":"External"}],"metadata":{"position":{"x":378,"y":474}}},{"id":"6728609a-9707-41f7-a87c-30ac1fde4f4c","type":"StartMediaStreaming","branches":[{"condition":"Success","transition":"abe8c2b7-f002-41b1-8e9e-374ff32c2351"},{"condition":"Error","transition":"410057d0-9390-486b-bbb4-c4def2a7367c"}],"parameters":[{"name":"Track","value":"FromCustomer"},{"name":"Track","value":"ToCustomer"},{"name":"MediaStreamTypes","value":"Audio"}],"metadata":{"position":{"x":85,"y":210},"fromCustomer":true,"toCustomer":true}},{"id":"abe8c2b7-f002-41b1-8e9e-374ff32c2351","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"e7825b58-a9db-4935-9f83-e67a564176e8"},{"condition":"Error","transition":"e7825b58-a9db-4935-9f83-e67a564176e8"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-west-2:948279062543:function:liveaudiostreamingstack-initContactDetails-SSMIFXE61NLB","namespace":null},{"name":"TimeLimit","value":"8"}],"metadata":{"position":{"x":349,"y":201},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"856dd865-e5a0-49c6-aacc-55fe53c38a22","metadata":{"entryPointPosition":{"x":20,"y":20},"snapToGrid":false,"name":"LiveAudioStreamingFlow","description":null,"type":"contactFlow","status":"published","hash":"df7b6ece472c9c85a46c02ecb6216df20c07d679583580e747972740a11718f3"}}